<h4>My Booking</h4>
<div class="card">
    <p-progressSpinner *ngIf="loading" class="align-self-center justify-content-center align-items-center align-content-center"></p-progressSpinner>

    <p-table [value]="bookings" dataKey="id" sortField="appointment_date" sortMode="single" [scrollable]="true" rowGroupMode="subheader" groupRowsBy="appointment_date" responsiveLayout="scroll">
        <ng-template pTemplate="header">
            <tr>
                <th style="min-width:200px">Date & Time</th>
                <th style="min-width:120px">Table</th>
                <th style="min-width:120px">Duration</th>
                <th style="min-width:120px">Payment</th>
                <th style="min-width:120px">Status</th>
                <th style="min-width:120px">Punch In</th>
                <th style="min-width:20px"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-booking>
            <tr>
                <td colspan="8">
                    <span class="font-bold ml-2">No record found.</span>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="groupheader" let-booking>
            <tr pRowGroupHeader>
                <td colspan="8">
                    <i class="pi pi-calendar"></i>
<!--                    <img [alt]="customer.representative.name" src="assets/showcase/images/demo/avatar/{{customer.representative.image}}" width="32" style="vertical-align: middle" />-->
                    <span class="font-bold ml-2">{{booking.appointment_date}}</span>
                </td>
            </tr>
        </ng-template>
<!--        <ng-template pTemplate="groupfooter" let-appointment>-->
<!--            <tr class="p-rowgroup-footer">-->
<!--                <td style="min-width: 80%">-->
<!--                    <div style="text-align: right; width: 100%">Total Customers</div>-->
<!--                </td>-->
<!--                <td style="width: 20%">{{calculateCustomerTotal(customer.representative.name)}}</td>-->
<!--            </tr>-->
<!--        </ng-template>-->
        <ng-template pTemplate="body" let-appointment let-rowIndex="rowIndex" let-expanded="expanded">
            <tr>
                <td style="min-width:200px">
                    <span class="p-column-title">Date & Time</span>
                    <span class="booking-badge bg-purple-50 text-purple-400">{{ appointmentService.formatDateTime(appointment.start_time) }} - {{ appointmentService.formatDateTime(appointment.end_time) }}</span>
                </td>
                <td style="min-width:120px">
                    <span class="p-column-title">Table</span>
                    <p-avatar [label]="getInitial(appointment.name)" shape="circle" [style]="{'background-color': '#' + appointmentService.colors[appointment.room_id], 'color': '#fff'}"></p-avatar>
                    <span class="pl-2"> {{appointment.name}}</span>
                </td>
                <td style="min-width:120px">
                    <span class="p-column-title">Duration</span>
                    {{ duration(appointment) }}
                </td>
                <td style="min-width:120px">
                    <span class="p-column-title">Payment</span>
                    {{appointment.price | currency:'HK$'}}
                </td>
                <td style="min-width:120px">
                    <span class="p-column-title">Status</span>
                    <span [class]="'booking-badge status-' + appointment.status">{{appointment.status}}</span>
                </td>
                <td style="min-width:120px">
                    <span class="p-column-title">Punch In</span>
                    <button pButton type="button" *ngIf="ableCheckin(appointment)" class="p-button-sm p-button-outlined" icon="pi pi-clock" iconPos="left" (click)="punchIn(appointment)"></button>
                    <span class="">{{ appointmentService.formatDateTime(appointment.checkin) }}</span>
<!--                    / <span class="">{{ appointmentService.formatDateTime(appointment.checkout) }}</span>-->
                </td>
                <td style="min-width:20px">
                    <button pButton type="button" class="p-" icon="pi pi-pencil" iconPos="left"></button>
                </td>
            </tr>
        </ng-template>
<!--        <ng-template pTemplate="rowexpansion" let-appointment>-->
<!--            <tr>-->
<!--                <td colspan="8">hihi</td>-->
<!--            </tr>-->
<!--        </ng-template>-->

    </p-table>

    <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
</div>
